# Keyword options for learning algorithms
#  specify
#   * how many laps (passes through data) to perform
#   * convergence assessment
#   * birth move settings
#   * merge move settings

########################################################### EM
[EM]
nLap=10
convergeThr=0.05
convergeSigFig=6
startLap=0
minLaps=1

[EMHelp]
nLap=Number of laps (passes thru entire dataset) to perform.
convergeSigFig=Number of significant figures at which ELBO (log evidence) objective should match between successive updates to terminate run early.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### GS
[GS]
nLap=10
startLap=0
Kmax=500

[GSHelp]
nLap=Number of laps (passes thru entire dataset) to perform.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### VB
[VB]
nLap=10
convergeThr=0.05
convergeSigFig=6
startLap=0
minLaps=1
doShowSeriousWarningsOnly=1
nCoordAscentItersLP=10
convThrLP=0.01
routineLP=simple
methodLP=memo
restartremovejunkLP=0
restartNumItersLP=5
restartNumTrialsLP=5
restartCriteriaLP=smallest
restartMaxThrLP=25
limitMemoryLP=0

[VBHelp]
nLap=Number of laps (passes thru entire dataset) to perform.
convergeSigFig=Number of significant figures at which ELBO (log evidence) objective should match between successive updates to terminate run early.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### soVB
# Remember, online methods have nLap determined by OnlineDataPrefs.
[soVB]
rhoexp=0.5
rhodelay=1.0
startLap=0
minLaps=1
doMemoELBO=1
doShowSeriousWarningsOnly=1
methodLP=prior
nCoordAscentItersLP=10
convThrLP=0.01
restartremovejunkLP=0
restartNumItersLP=5
restartNumTrialsLP=5
restartCriteriaLP=smallest
restartMaxThrLP=25
routineLP=simple
limitMemoryLP=0


[soVBHelp]
rhoexp=Scalar exponent in (0.5, 1] to use for learning rate schedule. At update t, rho[t] = (rhodelay + t)**(-rhoexp).
rhodelay=Scalar positive delay to use for learning rate schedule. At update t, rho[t] = (rhodelay + t)**(-rhoexp).
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.


########################################################### moVB
# Remember, online methods have nLap determined by OnlineDataPrefs.
[moVB]
debug=off
doFullPassBeforeMstep=0
convergeSigFig=6
convergeThr=0.01
startLap=0
minLaps=1
doMemoizeLocalParams=1
doShowSeriousWarningsOnly=1
nCoordAscentItersLP=10
convThrLP=0.01
initconvThrLP=0.0
plateauLapLP=100
restartremovejunkLP=0
restartNumItersLP=5
restartNumTrialsLP=5
restartCriteriaLP=smallest
restartMaxThrLP=25
routineLP=simple
methodLP=memo
limitMemoryLP=0

[moVBHelp]
doMemoizeLocalParams=Integer flag. If 1, memoizes local params across laps.
doFullPassBeforeMstep=Integer flag. If 1, waits until full pass thru dataset before performing the first Mstep. If 0, performs Mstep after the first batch.
convergeSigFig=Number of significant figures at which ELBO (log evidence) objective should match between successive updates to terminate run early.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### Birth
[birth]
birthFailLimit=2
birthChangeInSizeToReactivate=0.1
birthDebug=0
fracLapsBirth=0.9
birthPerLap=1
birthBatchFrac=0.0
birthBatchLapLimit=10
birthHoldoutData=0
doVizBirth=0
birthVerifyELBOIncrease=0
birthVerifyELBOIncreaseFresh=0
Kfresh=10
Kmax=200

### TargetPlanner
targetSelectName=smart

### TargetDataSampler
targetMinSize=10
targetMaxSize=200
targetCompFrac=0.1
targetMinKLPerDoc=0
targetExample=0
targetMinWordsPerDoc=100
targetWordMinCount=5
targetNumWords=10


### Create-refine-cleanup details
expandOrder=expandThenRefine
expandAdjustSuffStats=0
refineNumIters=0

creationRoutine=randexamples
creationDoUpdateFresh=1
creationNumIters=100

cleanupMinSize=10
cleanupDeleteEmpty=1
cleanupMergeToImproveFresh=1
cleanupDeleteToImproveFresh=0
cleanupDeleteToImprove=0
cleanupDeleteViaLP=0
cleanupDeleteNumIters=2

[birthHelp]
birthPerLap=Num. birth proposals per pass of the data
Kfresh=Max num. new components created by birth move

########################################################### Merge
###########################################################
[merge]
mergePairSelection=wholeELBObetter
mergeStartLap=1
mergePerLap=25
mergeNumStuckBeforeQuit=10
mergeNumExtraCandidates=0
mergeELBOTrackMethod=exact
mergeLogVerbose=0
mergeScoreRefreshInterval=10
mergeMaxDegree=3
mergeUpdateFast=1
doVizMerge=False


[softmerge]
mergeStartLap=1
mergeNumStuckBeforeQuit=10
mergeLogVerbose=0
doVizMerge=False

[shuffle]
shufflename=bigtosmall

[delete]
dtargetMaxSize=100
dtargetMinCount=0.01
deleteStartLap=1
deleteFailLimit=2
deleteNumStuckBeforeQuit=1
doVizDelete=0

[prune]
doVizPrune=0
topicMinSize=1000
pruneselectroutine=none
prunePerLap=5
pruneTargetSize=100
pruneSize=1000
initLPMethod=scratch


########################################################### strVB
# Remember, online methods have nLap determined by OnlineDataPrefs.
[strVB]
debug=off
convergeSigFig=6
convergeThr=0.01
startLap=0
minLaps=1
doMemoizeLocalParams=1
doShowSeriousWarningsOnly=1
nCoordAscentItersLP=10
convThrLP=0.01
initconvThrLP=0.0
plateauLapLP=100
restartremovejunkLP=0
restartNumItersLP=5
restartNumTrialsLP=5
restartCriteriaLP=smallest
restartMaxThrLP=25
routineLP=simple
methodLP=memo
limitMemoryLP=0
delay=0.0
decay=off