# Keyword options for learning algorithms
#  specify
#   * how many laps (passes through data) to perform
#   * convergence assessment
#   * birth move settings
#   * merge move settings

########################################################### EM
[EM]
nLap=10
convergeSigFig=6
startLap=0

[EMHelp]
nLap=Number of laps (passes thru entire dataset) to perform.
convergeSigFig=Number of significant figures at which ELBO (log evidence) objective should match between successive updates to terminate run early.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### VB
[VB]
nLap=10
convergeSigFig=6
startLap=0
nCoordAscentItersLP=10
nCoordAscentFromScratchLP=25
convThrLP=0.01
methodLP=numpy
doOnlySomeDocsLP=1
methodLP=memo
doShowSeriousWarningsOnly=1

[VBHelp]
nLap=Number of laps (passes thru entire dataset) to perform.
convergeSigFig=Number of significant figures at which ELBO (log evidence) objective should match between successive updates to terminate run early.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### soVB
# Remember, online methods have nLap determined by OnlineDataPrefs.
[soVB]
rhoexp=0.5
rhodelay=1.0
startLap=0
doShowSeriousWarningsOnly=1
methodLP=scratch
nCoordAscentItersLP=10
nCoordAscentFromScratchLP=25
convThrLP=0.01
nHardItersLP=1
logdirLP=0

[soVBHelp]
rhoexp=Scalar exponent in (0.5, 1] to use for learning rate schedule. At update t, rho[t] = (rhodelay + t)**(-rhoexp).
rhodelay=Scalar positive delay to use for learning rate schedule. At update t, rho[t] = (rhodelay + t)**(-rhoexp).
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.


########################################################### moVB
# Remember, online methods have nLap determined by OnlineDataPrefs.
[moVB]
doFullPassBeforeMstep=0
convergeSigFig=6
convergeDuration=2
startLap=0
doMemoizeLocalParams=1
methodLP=scratch
nCoordAscentItersLP=10
nCoordAscentFromScratchLP=25
convThrLP=0.01
nHardItersLP=1
logdirLP=0
doDocTopicFracLP=0
doOnlySomeDocsLP=1
doShowSeriousWarningsOnly=1

[moVBHelp]
doMemoizeLocalParams=Integer flag. If 1, memoizes local params across laps.
doFullPassBeforeMstep=Integer flag. If 1, waits until full pass thru dataset before performing the first Mstep. If 0, performs Mstep after the first batch.
convergeSigFig=Number of significant figures at which ELBO (log evidence) objective should match between successive updates to terminate run early.
startLap=Integer number of laps to start learning at. Use only when restarting a previous run via ContinueRun.py.

########################################################### Birth
[birth]
birthDebug=0
fracLapsBirth=0.9
birthPerLap=1
birthBatchFrac=0.0
birthBatchLapLimit=10
birthHoldoutData=0
doVizBirth=0
birthVerifyELBOIncrease=1
birthVerifyELBOIncreaseFresh=0
Kfresh=10
Kmax=200

### TargetPlanner
targetSelectName=delayandsizebiased

### TargetDataSampler
targetMinSize=10
targetMaxSize=200
targetCompFrac=0.1
targetMinKLPerDoc=0
targetExample=0
targetMinWordsPerDoc=100
targetWordMinCount=5
targetNumWords=10


### Create-refine-cleanup details
expandAdjustSuffStats=1
expandOrder=expandThenRefine
refineNumIters=40
creationRoutine=findmissingtopics
creationDoUpdateFresh=0
creationNumIters=0
cleanupDeleteEmpty=1
cleanupDeleteToImproveFresh=1
cleanupDeleteToImprove=1
cleanupMinSize=100
cleanupDeleteViaLP=1
cleanupDeleteNumIters=2

[birthHelp]
birthPerLap=Num. birth proposals per pass of the data
Kfresh=Max num. new components created by birth move

########################################################### Merge
[merge]
mergeStartLap=1
mergeNumStuckBeforeQuit=5
mergePerLap=25
mergeNumExtraCandidates=0
preselectroutine=marglik
mergeELBOTrackMethod=exact
doVizMerge=False


[shuffle]
shufflename=bigtosmall

[delete]
preselectroutine=doctopiccorr
fallbackThr=0.5
deleteUpdateEachBatch=1
topicMinSize=1000
deleteCompID=-1
doVizDelete=0

[prune]
doVizPrune=0
topicMinSize=1000
pruneselectroutine=none
prunePerLap=5
pruneTargetSize=100
pruneSize=1000
initLPMethod=scratch
