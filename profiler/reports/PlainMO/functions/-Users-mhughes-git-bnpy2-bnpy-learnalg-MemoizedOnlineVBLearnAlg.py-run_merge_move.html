<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Profiling Results</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../../assets/css/docs.css" rel="stylesheet">
    <!-- <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="../../assets/css/font-awesome/font-awesome.min.css">
  </head>

  <body id="top">
    <header class="navbar navbar-inverse navbar-static-top bs-docs-nav" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="../index.html" class="navbar-brand">Profiling Results</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="../index.html">Summary</a>
            </li>
            <li class="active">
              <a href="#">run_merge_move</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <div class="container bs-docs-container">
      <div class="row">
	<div class="col-md-2">
	  <div class="bs-sidebar affix-top hidden-print" role="complementary">
	    <ul class="nav bs-sidenav">
              <li><a href="#function">run_merge_move</a></li>
	      <!-- <li><a href="#parents">Parents</a></li> -->
	      <li><a href="#lines">Lines</a></li>
	      <!-- <li><a href="#children">Possible Children</a></li> -->
	      <li><a href="#coverage">Coverage</a></li>
	      <li><a href="#listing">Function Listing</a></li>
	    </ul>

	  </div>
	</div>
        <div class="col-md-10">
	  <div class="page-header" id="function">
	    <h1>run_merge_move</h1>
	  </div>

          <p>223 Calls, 4.87941 s</p>
	  <p>Generated 10:40:27 12/20/13 MST</p>
          <p>Function in file <a href="../../..///Users/mhughes/git/bnpy2/bnpy/learnalg/MemoizedOnlineVBLearnAlg.py">/Users/mhughes/git/bnpy2/bnpy/learnalg/MemoizedOnlineVBLearnAlg.py</a></p>

          <!-- <h3 id="parents">Parents</h3> -->
          <!-- <div> -->
          <!--   <table class="table table-hover"> -->
          <!--     <tr> -->
          <!--       <th>Function Name</th> -->
          <!--       <\!-- <th>Function Type</th> -\-> -->
          <!--       <th>Calls</th> -->
          <!--     </tr> -->
          <!--      -->
          <!--   </table> -->
          <!-- </div> -->

          <h3 id="lines">Lines where the most time was spent</h3>
          <div>
            <table class="table table-hover table-condensed">
              <tr>
                <th>Line Number</th>
                <th>Code</th>
                <th>Calls</th>
                <th>Total Time</th>
                <th>% Time</th>
                <th>Time Plot</th>
              </tr>
	      
              <tr class="">
                <td><a href="#line415">415</td>
                <td><pre class="prettyprint">  @profile</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line416">416</td>
                <td><pre class="prettyprint">  def run_merge_move(self, ...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line417">417</td>
                <td><pre class="prettyprint">    ''' Run (potentially ma...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line418">418</td>
                <td><pre class="prettyprint">          performing necess...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line419">419</td>
                <td><pre class="prettyprint">            (1) avoid tryin...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line420">420</td>
                <td><pre class="prettyprint">            (2) avoid mergi...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line421">421</td>
                <td><pre class="prettyprint">                since the p...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line422">422</td>
                <td><pre class="prettyprint">        Returns</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line423">423</td>
                <td><pre class="prettyprint">        -------</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line424">424</td>
                <td><pre class="prettyprint">        hmodel : bnpy HMode...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line425">425</td>
                <td><pre class="prettyprint">        SS : bnpy SuffStatB...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line426">426</td>
                <td><pre class="prettyprint">        evBound : correct E...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line427">427</td>
                <td><pre class="prettyprint">                  guarantee...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line428">428</td>
                <td><pre class="prettyprint">    '''</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="danger">
                <td><a href="#line429">429</td>
                <td><pre class="prettyprint">    import MergeMove</pre></td>
		<td>20</td>
                <td>0.036 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line430">430</td>
                <td><pre class="prettyprint">    self.MergeLog = list() ...</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line431">431</td>
                <td><pre class="prettyprint">    excludeList = list()</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line432">432</td>
                <td><pre class="prettyprint">    excludePairs = defaultd...</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line433">433</td>
                <td><pre class="prettyprint">    nMergeAttempts = self.a...</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line434">434</td>
                <td><pre class="prettyprint">    trialID = 0</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line435">435</td>
                <td><pre class="prettyprint">    while trialID < nMergeA...</pre></td>
		<td>77</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line436">436</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line437">437</td>
                <td><pre class="prettyprint">      # Synchronize content...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line438">438</td>
                <td><pre class="prettyprint">      # So that comp exclud...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line439">439</td>
                <td><pre class="prettyprint">      #  is automatically c...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line440">440</td>
                <td><pre class="prettyprint">      for kx in excludeList:</pre></td>
		<td>139</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line441">441</td>
                <td><pre class="prettyprint">        for kk in excludePa...</pre></td>
		<td>223</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line442">442</td>
                <td><pre class="prettyprint">          excludePairs[kk]....</pre></td>
		<td>161</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line443">443</td>
                <td><pre class="prettyprint">          excludePairs[kx]....</pre></td>
		<td>161</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line444">444</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line445">445</td>
                <td><pre class="prettyprint">      for kk in excludePairs:</pre></td>
		<td>215</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line446">446</td>
                <td><pre class="prettyprint">        if len(excludePairs...</pre></td>
		<td>138</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line447">447</td>
                <td><pre class="prettyprint">          if kk not in excl...</pre></td>
		<td>91</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line448">448</td>
                <td><pre class="prettyprint">            excludeList.app...</pre></td>
		<td>44</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line449">449</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line450">450</td>
                <td><pre class="prettyprint">      if len(excludeList) >...</pre></td>
		<td>77</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line451">451</td>
                <td><pre class="prettyprint">        Log.info('Merge Don...</pre></td>
		<td>20</td>
                <td>0.032 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line452">452</td>
                <td><pre class="prettyprint">        break # when we don...</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line453">453</td>
                <td><pre class="prettyprint">        </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line454">454</td>
                <td><pre class="prettyprint">      if self.hasMove('birt...</pre></td>
		<td>57</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line455">455</td>
                <td><pre class="prettyprint">        kA = self.BirthComp...</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line456">456</td>
                <td><pre class="prettyprint">        if kA in excludeList:</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line457">457</td>
                <td><pre class="prettyprint">          continue</pre></td>
		<td>4</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line458">458</td>
                <td><pre class="prettyprint">      else:</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line459">459</td>
                <td><pre class="prettyprint">        kA = None</pre></td>
		<td>37</td>
                <td>0.012 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line460">460</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line461">461</td>
                <td><pre class="prettyprint">      hmodel, SS, evBound, ...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line462">462</td>
                <td><pre class="prettyprint">                 hmodel, No...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line463">463</td>
                <td><pre class="prettyprint">                 excludeLis...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="danger">
                <td><a href="#line464">464</td>
                <td><pre class="prettyprint">                 kA=kA, **s...</pre></td>
		<td>53</td>
                <td>4.7 s</td>
                <td> 95.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line465">465</td>
                <td><pre class="prettyprint">      trialID += 1</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="danger">
                <td><a href="#line466">466</td>
                <td><pre class="prettyprint">      self.print_msg(MoveIn...</pre></td>
		<td>53</td>
                <td>0.075 s</td>
                <td>  1.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line467">467</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line468">468</td>
                <td><pre class="prettyprint">      # Begin Bookkeeping!</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line469">469</td>
                <td><pre class="prettyprint">      if 'kA' in MoveInfo a...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line470">470</td>
                <td><pre class="prettyprint">        kA = MoveInfo['kA']</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line471">471</td>
                <td><pre class="prettyprint">        kB = MoveInfo['kB']</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line472">472</td>
                <td><pre class="prettyprint">        excludePairs[kA].ad...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line473">473</td>
                <td><pre class="prettyprint">        excludePairs[kB].ad...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line474">474</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line475">475</td>
                <td><pre class="prettyprint">      if MoveInfo['didAccep...</pre></td>
		<td>53</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line476">476</td>
                <td><pre class="prettyprint">        self.MergeLog.appen...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line477">477</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line478">478</td>
                <td><pre class="prettyprint">        # Adjust excluded l...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line479">479</td>
                <td><pre class="prettyprint">        #  have been shifte...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line480">480</td>
                <td><pre class="prettyprint">        for kk in range(len...</pre></td>
		<td>25</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line481">481</td>
                <td><pre class="prettyprint">          if excludeList[kk...</pre></td>
		<td>6</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line482">482</td>
                <td><pre class="prettyprint">            excludeList[kk]...</pre></td>
		<td>4</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line483">483</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line484">484</td>
                <td><pre class="prettyprint">        # Exclude new merge...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line485">485</td>
                <td><pre class="prettyprint">        #  since precompute...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line486">486</td>
                <td><pre class="prettyprint">        excludeList.append(kA)</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line487">487</td>
                <td><pre class="prettyprint">    </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line488">488</td>
                <td><pre class="prettyprint">        # Adjust excluded p...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line489">489</td>
                <td><pre class="prettyprint">        newExcludePairs = d...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line490">490</td>
                <td><pre class="prettyprint">        for kk in excludePa...</pre></td>
		<td>63</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line491">491</td>
                <td><pre class="prettyprint">          ksarr = np.asarra...</pre></td>
		<td>44</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line492">492</td>
                <td><pre class="prettyprint">          ksarr[ksarr > kB]...</pre></td>
		<td>44</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line493">493</td>
                <td><pre class="prettyprint">          if kk > kB:</pre></td>
		<td>44</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line494">494</td>
                <td><pre class="prettyprint">            newExcludePairs...</pre></td>
		<td>4</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line495">495</td>
                <td><pre class="prettyprint">          elif kk < kB:</pre></td>
		<td>40</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line496">496</td>
                <td><pre class="prettyprint">            newExcludePairs...</pre></td>
		<td>21</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line497">497</td>
                <td><pre class="prettyprint">        excludePairs = newE...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line498">498</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line499">499</td>
                <td><pre class="prettyprint">        # Adjust internal t...</pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line500">500</td>
                <td><pre class="prettyprint">        if self.hasMove('bi...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line501">501</td>
                <td><pre class="prettyprint">          compList = self.L...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line502">502</td>
                <td><pre class="prettyprint">          newDict = default...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line503">503</td>
                <td><pre class="prettyprint">          for kk in compList:</pre></td>
		<td>116</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line504">504</td>
                <td><pre class="prettyprint">            if kk == kA:</pre></td>
		<td>97</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line505">505</td>
                <td><pre class="prettyprint">              newDict[kA] =...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line506">506</td>
                <td><pre class="prettyprint">            elif kk < kB:</pre></td>
		<td>78</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line507">507</td>
                <td><pre class="prettyprint">              newDict[kk] =...</pre></td>
		<td>49</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line508">508</td>
                <td><pre class="prettyprint">            elif kk > kB:</pre></td>
		<td>29</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line509">509</td>
                <td><pre class="prettyprint">              newDict[kk-1]...</pre></td>
		<td>10</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line510">510</td>
                <td><pre class="prettyprint">          self.LapsSinceLas...</pre></td>
		<td>19</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line511">511</td>
                <td><pre class="prettyprint"> </pre></td>
		<td>0</td>
                <td>--</td>
                <td>0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line512">512</td>
                <td><pre class="prettyprint">    if SS.hasMergeTerms():</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line513">513</td>
                <td><pre class="prettyprint">      SS.setMergeFieldsToZe...</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
              <tr class="">
                <td><a href="#line514">514</td>
                <td><pre class="prettyprint">    return hmodel, SS, evBound</pre></td>
		<td>20</td>
                <td>< 0.01 s</td>
                <td>  0.0</td>
                <td></td>
              </tr>
              
            </table>
          </div>

          <!-- <h3 id="children">Children</h3> -->
          <!-- <div> -->
          <!--   <table class="table table-hover"> -->
          <!--     <tr> -->
          <!--       <th>Function Name</th> -->
          <!--       <\!-- <th>Function Type</th> -\-> -->
          <!--       <th>Calls</th> -->
          <!--       <th>Total Time</th> -->
          <!--       <th>% Time</th> -->
          <!--       <th>Time Plot</th> -->
          <!--     </tr> -->
          <!--      -->
          <!--   </table> -->
          <!-- </div> -->

          <h3 id="coverage">Coverage results</h3>
          <div>
            <table class="table">
              <tr>
                <td>Total lines in function</td>
                <td>100</td>
              </tr>
              <tr>
                <td>Non-code lines</td>
                <td>23</td>
              </tr>
              <tr>
                <td>Code lines</td>
                <td>77</td>
              </tr>
              <tr>
                <td>Code lines that did run</td>
                <td>63</td>
              </tr>
              <tr>
                <td>Code lines that did not run</td>
                <td>14</td>
              </tr>
              <tr>
                <td>Coverage (did run / can run)</td>
                <td> 81.8%</td>
              </tr>
            </table>
          </div>

          <h3 id="listing">Function listing</h3>
          <table class="table table-borderless table-condensed">
            <tr>
              <th>time</th>
              <th>calls</th>
              <th>line</th>
              <th>code</th>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line415">415</td>
              <td><pre class="prettyprint"> @profile</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line416">416</td>
              <td><pre class="prettyprint"> def run_merge_move(self, hmodel, Data, SS, evBound):</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line417">417</td>
              <td><pre class="prettyprint">   ''' Run (potentially many) merge moves on hmodel,</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line418">418</td>
              <td><pre class="prettyprint">         performing necessary bookkeeping to</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line419">419</td>
              <td><pre class="prettyprint">           (1) avoid trying the same merge twice</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line420">420</td>
              <td><pre class="prettyprint">           (2) avoid merging a component that has already been merged,</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line421">421</td>
              <td><pre class="prettyprint">               since the precomputed entropy will no longer be correct.</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line422">422</td>
              <td><pre class="prettyprint">       Returns</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line423">423</td>
              <td><pre class="prettyprint">       -------</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line424">424</td>
              <td><pre class="prettyprint">       hmodel : bnpy HModel, with (possibly) some merged components</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line425">425</td>
              <td><pre class="prettyprint">       SS : bnpy SuffStatBag, with (possibly) merged components</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line426">426</td>
              <td><pre class="prettyprint">       evBound : correct ELBO for returned hmodel</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line427">427</td>
              <td><pre class="prettyprint">                 guaranteed to be at least as large as input evBound    </pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line428">428</td>
              <td><pre class="prettyprint">   '''</pre></td>
            </tr>
            
            <tr class="danger">
              <td>0.036 s</td>
              <td>20</td>
              <td id="line429">429</td>
              <td><pre class="prettyprint">   import MergeMove</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line430">430</td>
              <td><pre class="prettyprint">   self.MergeLog = list() # clear memory of recent merges!</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line431">431</td>
              <td><pre class="prettyprint">   excludeList = list()</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line432">432</td>
              <td><pre class="prettyprint">   excludePairs = defaultdict(lambda:set())</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line433">433</td>
              <td><pre class="prettyprint">   nMergeAttempts = self.algParams['merge']['mergePerLap']</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line434">434</td>
              <td><pre class="prettyprint">   trialID = 0</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>77</td>
              <td id="line435">435</td>
              <td><pre class="prettyprint">   while trialID < nMergeAttempts:</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line436">436</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line437">437</td>
              <td><pre class="prettyprint">     # Synchronize contents of the excludeList and excludePairs</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line438">438</td>
              <td><pre class="prettyprint">     # So that comp excluded in excludeList (due to accepted merge)</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line439">439</td>
              <td><pre class="prettyprint">     #  is automatically contained in the set of excluded pairs </pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>139</td>
              <td id="line440">440</td>
              <td><pre class="prettyprint">     for kx in excludeList:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>223</td>
              <td id="line441">441</td>
              <td><pre class="prettyprint">       for kk in excludePairs:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>161</td>
              <td id="line442">442</td>
              <td><pre class="prettyprint">         excludePairs[kk].add(kx)</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>161</td>
              <td id="line443">443</td>
              <td><pre class="prettyprint">         excludePairs[kx].add(kk)</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line444">444</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>215</td>
              <td id="line445">445</td>
              <td><pre class="prettyprint">     for kk in excludePairs:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>138</td>
              <td id="line446">446</td>
              <td><pre class="prettyprint">       if len(excludePairs[kk]) > hmodel.obsModel.K - 2:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>91</td>
              <td id="line447">447</td>
              <td><pre class="prettyprint">         if kk not in excludeList:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>44</td>
              <td id="line448">448</td>
              <td><pre class="prettyprint">           excludeList.append(kk)</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line449">449</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>77</td>
              <td id="line450">450</td>
              <td><pre class="prettyprint">     if len(excludeList) > hmodel.obsModel.K - 2:</pre></td>
            </tr>
            
            <tr class="">
              <td>0.032 s</td>
              <td>20</td>
              <td id="line451">451</td>
              <td><pre class="prettyprint">       Log.info('Merge Done. No more options to try!')</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line452">452</td>
              <td><pre class="prettyprint">       break # when we don't have any more comps to merge</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line453">453</td>
              <td><pre class="prettyprint">       </pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>57</td>
              <td id="line454">454</td>
              <td><pre class="prettyprint">     if self.hasMove('birth') and len(self.BirthCompIDs) > 0:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line455">455</td>
              <td><pre class="prettyprint">       kA = self.BirthCompIDs.pop()</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line456">456</td>
              <td><pre class="prettyprint">       if kA in excludeList:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>4</td>
              <td id="line457">457</td>
              <td><pre class="prettyprint">         continue</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line458">458</td>
              <td><pre class="prettyprint">     else:</pre></td>
            </tr>
            
            <tr class="">
              <td>0.012 s</td>
              <td>37</td>
              <td id="line459">459</td>
              <td><pre class="prettyprint">       kA = None</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line460">460</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line461">461</td>
              <td><pre class="prettyprint">     hmodel, SS, evBound, MoveInfo = MergeMove.run_merge_move(</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line462">462</td>
              <td><pre class="prettyprint">                hmodel, None, SS, evBound, randstate=self.PRNG,</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line463">463</td>
              <td><pre class="prettyprint">                excludeList=excludeList, excludePairs=excludePairs,</pre></td>
            </tr>
            
            <tr class="danger">
              <td>4.7 s</td>
              <td>53</td>
              <td id="line464">464</td>
              <td><pre class="prettyprint">                kA=kA, **self.algParams['merge'])</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line465">465</td>
              <td><pre class="prettyprint">     trialID += 1</pre></td>
            </tr>
            
            <tr class="danger">
              <td>0.075 s</td>
              <td>53</td>
              <td id="line466">466</td>
              <td><pre class="prettyprint">     self.print_msg(MoveInfo['msg'])</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line467">467</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line468">468</td>
              <td><pre class="prettyprint">     # Begin Bookkeeping!</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line469">469</td>
              <td><pre class="prettyprint">     if 'kA' in MoveInfo and 'kB' in MoveInfo:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line470">470</td>
              <td><pre class="prettyprint">       kA = MoveInfo['kA']</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line471">471</td>
              <td><pre class="prettyprint">       kB = MoveInfo['kB']</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line472">472</td>
              <td><pre class="prettyprint">       excludePairs[kA].add(kB)</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line473">473</td>
              <td><pre class="prettyprint">       excludePairs[kB].add(kA)</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line474">474</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>53</td>
              <td id="line475">475</td>
              <td><pre class="prettyprint">     if MoveInfo['didAccept']:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line476">476</td>
              <td><pre class="prettyprint">       self.MergeLog.append(dict(kA=kA, kB=kB))</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line477">477</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line478">478</td>
              <td><pre class="prettyprint">       # Adjust excluded lists since components kB+1, kB+2, ... K</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line479">479</td>
              <td><pre class="prettyprint">       #  have been shifted down by one due to removal of kB</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>25</td>
              <td id="line480">480</td>
              <td><pre class="prettyprint">       for kk in range(len(excludeList)):</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>6</td>
              <td id="line481">481</td>
              <td><pre class="prettyprint">         if excludeList[kk] > kB:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>4</td>
              <td id="line482">482</td>
              <td><pre class="prettyprint">           excludeList[kk] -= 1</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line483">483</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line484">484</td>
              <td><pre class="prettyprint">       # Exclude new merged component kA from future attempts        </pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line485">485</td>
              <td><pre class="prettyprint">       #  since precomputed entropy terms involving kA aren't good</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line486">486</td>
              <td><pre class="prettyprint">       excludeList.append(kA)</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line487">487</td>
              <td><pre class="prettyprint">   </pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line488">488</td>
              <td><pre class="prettyprint">       # Adjust excluded pairs to remove kB and shift down kB+1, ... K</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line489">489</td>
              <td><pre class="prettyprint">       newExcludePairs = defaultdict(lambda:set())</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>63</td>
              <td id="line490">490</td>
              <td><pre class="prettyprint">       for kk in excludePairs.keys():</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>44</td>
              <td id="line491">491</td>
              <td><pre class="prettyprint">         ksarr = np.asarray(list(excludePairs[kk]))</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>44</td>
              <td id="line492">492</td>
              <td><pre class="prettyprint">         ksarr[ksarr > kB] -= 1</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>44</td>
              <td id="line493">493</td>
              <td><pre class="prettyprint">         if kk > kB:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>4</td>
              <td id="line494">494</td>
              <td><pre class="prettyprint">           newExcludePairs[kk-1] = set(ksarr)</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>40</td>
              <td id="line495">495</td>
              <td><pre class="prettyprint">         elif kk < kB:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>21</td>
              <td id="line496">496</td>
              <td><pre class="prettyprint">           newExcludePairs[kk] = set(ksarr)</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line497">497</td>
              <td><pre class="prettyprint">       excludePairs = newExcludePairs</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line498">498</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line499">499</td>
              <td><pre class="prettyprint">       # Adjust internal tracking of laps since birth</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line500">500</td>
              <td><pre class="prettyprint">       if self.hasMove('birth'):</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line501">501</td>
              <td><pre class="prettyprint">         compList = self.LapsSinceLastBirth.keys()</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line502">502</td>
              <td><pre class="prettyprint">         newDict = defaultdict(int)</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>116</td>
              <td id="line503">503</td>
              <td><pre class="prettyprint">         for kk in compList:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>97</td>
              <td id="line504">504</td>
              <td><pre class="prettyprint">           if kk == kA:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line505">505</td>
              <td><pre class="prettyprint">             newDict[kA] = np.maximum(self.LapsSinceLastBirth[kA], self.LapsSinceLastBirth[kB])</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>78</td>
              <td id="line506">506</td>
              <td><pre class="prettyprint">           elif kk < kB:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>49</td>
              <td id="line507">507</td>
              <td><pre class="prettyprint">             newDict[kk] = self.LapsSinceLastBirth[kk]</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>29</td>
              <td id="line508">508</td>
              <td><pre class="prettyprint">           elif kk > kB:</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>10</td>
              <td id="line509">509</td>
              <td><pre class="prettyprint">             newDict[kk-1] = self.LapsSinceLastBirth[kk]</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>19</td>
              <td id="line510">510</td>
              <td><pre class="prettyprint">         self.LapsSinceLastBirth = newDict</pre></td>
            </tr>
            
            <tr class="">
              <td>--</td>
              <td>0</td>
              <td id="line511">511</td>
              <td><pre class="prettyprint"></pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line512">512</td>
              <td><pre class="prettyprint">   if SS.hasMergeTerms():</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line513">513</td>
              <td><pre class="prettyprint">     SS.setMergeFieldsToZero()</pre></td>
            </tr>
            
            <tr class="">
              <td>< 0.01 s</td>
              <td>20</td>
              <td id="line514">514</td>
              <td><pre class="prettyprint">   return hmodel, SS, evBound</pre></td>
            </tr>
            
          </table>

          <!-- <h3 id="listing">Function listing take 2</h3> -->
	  <!-- <pre class="prettyprint">time        calls    line    code

--          0        415      @profile
--          0        416      def run_merge_move(self, hmodel, Data, SS, evBound):
--          0        417        ''' Run (potentially many) merge moves on hmodel,
--          0        418              performing necessary bookkeeping to
--          0        419                (1) avoid trying the same merge twice
--          0        420                (2) avoid merging a component that has already been merged,
--          0        421                    since the precomputed entropy will no longer be correct.
--          0        422            Returns
--          0        423            -------
--          0        424            hmodel : bnpy HModel, with (possibly) some merged components
--          0        425            SS : bnpy SuffStatBag, with (possibly) merged components
--          0        426            evBound : correct ELBO for returned hmodel
--          0        427                      guaranteed to be at least as large as input evBound    
--          0        428        '''
0.036 s     20       429        import MergeMove
< 0.01 s    20       430        self.MergeLog = list() # clear memory of recent merges!
< 0.01 s    20       431        excludeList = list()
< 0.01 s    20       432        excludePairs = defaultdict(lambda:set())
< 0.01 s    20       433        nMergeAttempts = self.algParams['merge']['mergePerLap']
< 0.01 s    20       434        trialID = 0
< 0.01 s    77       435        while trialID < nMergeAttempts:
--          0        436     
--          0        437          # Synchronize contents of the excludeList and excludePairs
--          0        438          # So that comp excluded in excludeList (due to accepted merge)
--          0        439          #  is automatically contained in the set of excluded pairs 
< 0.01 s    139      440          for kx in excludeList:
< 0.01 s    223      441            for kk in excludePairs:
< 0.01 s    161      442              excludePairs[kk].add(kx)
< 0.01 s    161      443              excludePairs[kx].add(kk)
--          0        444     
< 0.01 s    215      445          for kk in excludePairs:
< 0.01 s    138      446            if len(excludePairs[kk]) > hmodel.obsModel.K - 2:
< 0.01 s    91       447              if kk not in excludeList:
< 0.01 s    44       448                excludeList.append(kk)
--          0        449     
< 0.01 s    77       450          if len(excludeList) > hmodel.obsModel.K - 2:
0.032 s     20       451            Log.info('Merge Done. No more options to try!')
< 0.01 s    20       452            break # when we don't have any more comps to merge
--          0        453            
< 0.01 s    57       454          if self.hasMove('birth') and len(self.BirthCompIDs) > 0:
< 0.01 s    20       455            kA = self.BirthCompIDs.pop()
< 0.01 s    20       456            if kA in excludeList:
< 0.01 s    4        457              continue
--          0        458          else:
0.012 s     37       459            kA = None
--          0        460     
< 0.01 s    53       461          hmodel, SS, evBound, MoveInfo = MergeMove.run_merge_move(
< 0.01 s    53       462                     hmodel, None, SS, evBound, randstate=self.PRNG,
< 0.01 s    53       463                     excludeList=excludeList, excludePairs=excludePairs,
4.7 s       53       464                     kA=kA, **self.algParams['merge'])
< 0.01 s    53       465          trialID += 1
0.075 s     53       466          self.print_msg(MoveInfo['msg'])
--          0        467     
--          0        468          # Begin Bookkeeping!
< 0.01 s    53       469          if 'kA' in MoveInfo and 'kB' in MoveInfo:
< 0.01 s    53       470            kA = MoveInfo['kA']
< 0.01 s    53       471            kB = MoveInfo['kB']
< 0.01 s    53       472            excludePairs[kA].add(kB)
< 0.01 s    53       473            excludePairs[kB].add(kA)
--          0        474     
< 0.01 s    53       475          if MoveInfo['didAccept']:
< 0.01 s    19       476            self.MergeLog.append(dict(kA=kA, kB=kB))
--          0        477     
--          0        478            # Adjust excluded lists since components kB+1, kB+2, ... K
--          0        479            #  have been shifted down by one due to removal of kB
< 0.01 s    25       480            for kk in range(len(excludeList)):
< 0.01 s    6        481              if excludeList[kk] > kB:
< 0.01 s    4        482                excludeList[kk] -= 1
--          0        483     
--          0        484            # Exclude new merged component kA from future attempts        
--          0        485            #  since precomputed entropy terms involving kA aren't good
< 0.01 s    19       486            excludeList.append(kA)
--          0        487        
--          0        488            # Adjust excluded pairs to remove kB and shift down kB+1, ... K
< 0.01 s    19       489            newExcludePairs = defaultdict(lambda:set())
< 0.01 s    63       490            for kk in excludePairs.keys():
< 0.01 s    44       491              ksarr = np.asarray(list(excludePairs[kk]))
< 0.01 s    44       492              ksarr[ksarr > kB] -= 1
< 0.01 s    44       493              if kk > kB:
< 0.01 s    4        494                newExcludePairs[kk-1] = set(ksarr)
< 0.01 s    40       495              elif kk < kB:
< 0.01 s    21       496                newExcludePairs[kk] = set(ksarr)
< 0.01 s    19       497            excludePairs = newExcludePairs
--          0        498     
--          0        499            # Adjust internal tracking of laps since birth
< 0.01 s    19       500            if self.hasMove('birth'):
< 0.01 s    19       501              compList = self.LapsSinceLastBirth.keys()
< 0.01 s    19       502              newDict = defaultdict(int)
< 0.01 s    116      503              for kk in compList:
< 0.01 s    97       504                if kk == kA:
< 0.01 s    19       505                  newDict[kA] = np.maximum(self.LapsSinceLastBirth[kA], self.LapsSinc
                                          eLastBirth[kB])
< 0.01 s    78       506                elif kk < kB:
< 0.01 s    49       507                  newDict[kk] = self.LapsSinceLastBirth[kk]
< 0.01 s    29       508                elif kk > kB:
< 0.01 s    10       509                  newDict[kk-1] = self.LapsSinceLastBirth[kk]
< 0.01 s    19       510              self.LapsSinceLastBirth = newDict
--          0        511     
< 0.01 s    20       512        if SS.hasMergeTerms():
< 0.01 s    20       513          SS.setMergeFieldsToZero()
< 0.01 s    20       514        return hmodel, SS, evBound
</pre> -->

        </div>
      </div>
    </div>

    <a href="#top" class="scrollToTop hidden-phone" >
      <i class="icon-chevron-up"></i>
    </a>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../assets/js/bootstrap.min.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
  </body>
</html>
